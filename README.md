# Лабораторная работа №3. На кончиках пальцев

## Цель

- экспериментальное знакомство с устройством процессоров через моделирование; 
- получение опыта работы с компьютерной системой на нескольких уровнях организации.

### Выполнил
ФИО: Иванов Евгений Дмитриевич<br>
Группа: P33111

### Вариант

`asm | cisc | harv | hw | instr | struct | stream | mem | prob5`

## Язык программирования

### Структура программы

```
; секция данных
section .data
    var: (STR) | (NUM) | (buf NUM)

; секция кода
section .text
    [label:] instr [op1, [op2, [...]]]
```

### Секция данных

```
section .data
    HELLO:      "Hello"         ; строка
    NUMBER_HEX: 0xDEAD          ; число в 16 СС
    NUMBER_DEC: -15             ; число в 10 СС
    ARRAY:      buf 5           ; массив из 5 элементов
    NULL_TERM:  0x00
```

### Секция кода

```
section .text
    .print_char:                ; метка
        MOV %rdx, #HELLO[%rdi]  ; загрузка в rdx HELLO[rdi]
        CMP %rdx, #NULL_TERM    ; выставить флаги по операции вычитания rdx и константы
                                ; (прямая адресация)
        JE .exit                ; переход в случае равенства(флаг Z выставлен)
        MOV #STDOUT, %rdx       ; вывод символа из $rdx
        INC %rdi                ; rdi++
        JMP .print_char         ; безусловный переход к метке .print_char
    .exit:
        HLT                     ; завершение работы
```

### Инструкции

Инструкции могут принимать неограниченное количество операндов.

```
ADD %RAX, #VAR              ; %RAX + #VAR        -> %RAX
ADD %RAX, #VAR, 0xf1        ; #VAR + 0xf1        -> %RAX
ADD %RAX, #VAR, 0xf1, %RDX  ; #VAR + 0xf1 + %RDX -> %RAX
```

При трансляции сложная инструкция преобразуется в несколько простых.

[Документация по инструкциям](resources/instructions.md)





## Апробация

1. [cat](test/examples/cat.pyasm)
2. [hello](test/examples/hello.pyasm)
3. [prob5](test/examples/prob5.pyasm)

Журналы и коды алгоритмов можно посмотреть в каталоге [test/examples](test/examples).

| ФИО         | алг.  | LoC | code байт | code инстр. | инстр. | такт. | 
|-------------|-------|-----|-----------|-------------|--------|-------|
| Иванов Е.Д. | cat   | 12  | 643       | 6           | 28     | 46    |
| Иванов Е.Д. | hello | 14  | 765       | 7           | 69     | 116   |
| Иванов Е.Д. | prob5 | 43  | 1965      | 27          | 1468   | 3143  |















